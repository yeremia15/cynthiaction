<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Halaman Gabut</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            /* Untuk menghilangkan scrollbars */
        }

        canvas {
            display: block;
        }
    </style>
</head>

<body>
    <canvas id="canvas"></canvas>

    <script>
        const canvas = document.getElementById('canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        const balls = [];

        // Fungsi untuk membuat bola
        function createBall(x, y, radius, color) {
            const ball = {
                x,
                y,
                radius,
                color,
                velocityX: Math.random() * 6 - 3, // Kecepatan horizontal acak
                velocityY: -15, // Kecepatan awal vertikal
                gravity: 0.7, // Gravitasi
                floorFriction: 0.7, // Gesekan dengan lantai untuk mengurangi kecepatan bola
                lifeTime: 350, // Waktu hidup bola (dalam frame)
                age: 0 // Usia bola (dalam frame)
            };

            balls.push(ball);
        }

        // Fungsi untuk menggambar bola
        function drawBall(ball) {
            ctx.beginPath();
            ctx.arc(ball.x, ball.y, ball.radius, 0, Math.PI * 2);
            ctx.fillStyle = ball.color;
            ctx.fill();
            ctx.closePath();
        }

        // Fungsi untuk mengupdate posisi dan animasi bola
        function update() {
            ctx.clearRect(0, 0, canvas.width, canvas.height); // Bersihkan canvas

            balls.forEach((ball, index) => {
                ball.age++;

                if (ball.age >= ball.lifeTime) { // Hapus bola setelah mencapai waktu hidup
                    balls.splice(index, 1);
                    return; // Skip bola yang dihapus dari update
                }

                ball.y += ball.velocityY;
                ball.velocityY += ball.gravity;

                // Memantulkan bola ketika menyentuh lantai
                if (ball.y + ball.radius >= canvas.height) {
                    ball.y = canvas.height - ball.radius;
                    ball.velocityY *= -ball.floorFriction;
                }

                ball.x += ball.velocityX;

                // Geser bola ke arah yang berlawanan jika menyentuh tepi layar
                if (ball.x + ball.radius >= canvas.width || ball.x - ball.radius <= 0) {
                    ball.velocityX *= -1;
                }

                drawBall(ball); // Gambar bola
            });

            requestAnimationFrame(update); // Teruskan animasi
        }

        // Fungsi untuk menangani klik mouse untuk membuat bola
        function handleMouseClick(event) {
            const rect = canvas.getBoundingClientRect();
            const mouseX = event.clientX - rect.left;
            const mouseY = event.clientY - rect.top;
            createBall(mouseX, mouseY, 20, getRandomColor());
        }

        // Fungsi untuk mendapatkan warna acak
        function getRandomColor() {
            const letters = '0123456789ABCDEF';
            let color = '#';
            for (let i = 0; i < 6; i++) {
                color += letters[Math.floor(Math.random() * 16)];
            }
            return color;
        }

        // Mulai animasi setelah halaman dimuat
        window.onload = function () {
            update();
        };

        // Tambahkan event listener untuk menangani klik mouse
        canvas.addEventListener('click', handleMouseClick);
    </script>
</body>

</html>